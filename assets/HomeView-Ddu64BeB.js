import{r as f,o as w,c as a,a as n,b as t,F as v,d as k,n as $,e as H,f as g,t as d,g as C,h as I,i as b,u as E}from"./index-vt05okdP.js";import{i as N}from"./information-CctnqRBX.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{H as S}from"./HomeHead-Bw8jz7BN.js";import{B as V}from"./BottomNav-CyqcP8Xw.js";const B={class:"carousel-section"},R={class:"carousel-wrapper"},j=["src","alt","onError"],x={class:"pagination"},L=["onClick"],U={__name:"HomeCarousel",props:{images:{type:Array,default:()=>[{url:new URL("/images/banner1.jpg",import.meta.url).href,alt:"广告1",scale:1},{url:new URL("/images/banner2.jpg",import.meta.url).href,alt:"广告2",scale:1}]}},setup(m){const _=m,o=f(0);f(!1),w(()=>{setInterval(()=>{o.value=(o.value+1)%_.images.length},3e3)});const h=l=>{o.value=l},p=l=>{_.images[l].error=!0};return(l,i)=>(n(),a("section",B,[t("div",R,[(n(!0),a(v,null,k(m.images,(u,c)=>(n(),a("div",{key:c,class:$(["carousel-item",{active:o.value===c}])},[t("img",{src:u.url,alt:u.alt,style:H({transform:`scale(${u.scale})`}),onError:e=>p(c)},null,44,j)],2))),128))]),t("div",x,[(n(!0),a(v,null,k(m.images,(u,c)=>(n(),a("button",{key:c,class:$({active:o.value===c}),onClick:e=>h(c)},null,10,L))),128))])]))}},z=O(U,[["__scopeId","data-v-01bc9709"]]),F={class:"history-orders"},J={class:"section-header"},T={class:"order-list"},q={class:"order-image"},A=["src","onError"],D={key:0,class:"image-placeholder"},M={class:"order-details"},G={class:"order-status"},K={class:"order-id"},P={key:0},Q={key:1},W={class:"order-actions"},X=["disabled","onClick"],Y=["onClick"],Z={class:"order-actions"},ee=["onClick"],se={__name:"HomeOrderhistory",props:{groupedOrders:{type:Object,required:!0}},emits:["publish","cancel","review","restore","image-error"],setup(m,{emit:_}){const o=_,h=l=>l||"",p=l=>{console.error("图片加载失败:",l),o("image-error",l)};return(l,i)=>(n(),a("section",F,[t("div",J,[i[1]||(i[1]=t("h2",null,"我的历史订单",-1)),t("button",{class:"publish-button",onClick:i[0]||(i[0]=u=>o("publish"))}," 发布委托 + ")]),t("div",T,[(n(!0),a(v,null,k(m.groupedOrders,(u,c)=>(n(),a(v,{key:c},[(n(!0),a(v,null,k(u,e=>(n(),a("div",{key:e.id,class:$({"order-item":!0,"in-progress":e.status==="进行中",cancelled:e.status==="已取消",completed:e.status==="已完成"})},[t("div",q,[t("img",{src:h(e.image),alt:"订单图片",onError:s=>p(e.id)},null,40,A),e.image?g("",!0):(n(),a("div",D,"暂无图片"))]),t("div",M,[t("div",G,d(e.status),1),t("p",K,"订单号："+d(e.id),1),t("p",null,d(e.from)+" → "+d(e.to),1),t("p",null,"速递物品："+d(e.item),1),e.eta?(n(),a("p",P,[i[2]||(i[2]=C(" 预计 ")),t("span",null,d(e.eta),1),i[3]||(i[3]=C(" 分钟后送达 "))])):e.description?(n(),a("p",Q,d(e.description),1)):g("",!0)]),t("div",W,[e.status!=="已完成"?(n(),a("button",{key:0,class:"cancel-button",disabled:e.status!=="进行中",onClick:s=>o("cancel",e.id)}," 取消订单 ",8,X)):g("",!0),e.status==="已完成"?(n(),a("button",{key:1,class:"review-button",onClick:s=>o("review",e.id)}," 评价订单 ",8,Y)):g("",!0),t("div",Z,[e.status==="已取消"?(n(),a("button",{key:0,class:"restore-button",onClick:s=>o("restore",e.id)}," 恢复订单 ",8,ee)):g("",!0)])])],2))),128))],64))),128))])]))}},te=O(se,[["__scopeId","data-v-6c18b983"]]),oe={class:"home-page"},re={__name:"HomeView",setup(m){const _=E();f("home");const o=f([]);f(!1);const h=()=>{const s=localStorage.getItem("orders");o.value=s?JSON.parse(s):N.orders},p=()=>{localStorage.setItem("orders",JSON.stringify(o.value))},l=I(()=>{const s={};return o.value.forEach(r=>{s[r.date]||(s[r.date]=[]),s[r.date].push(r)}),s});w(()=>{h()});const i=s=>{const r=o.value.find(y=>y.id===s);r&&r.status==="进行中"&&(r.status="已取消",r.description="已取消",r.eta=null,p())},u=s=>{const r=o.value.find(y=>y.id===s);r&&r.status==="已取消"&&(r.status="进行中",r.description="",r.eta=20,p())},c=s=>{console.log("评价订单:",s)},e=()=>{_.push("/publish")};return(s,r)=>(n(),a(v,null,[b(S),t("div",oe,[b(z),b(te,{"grouped-orders":l.value,onPublish:e,onCancel:i,onRestore:u,onReview:c},null,8,["grouped-orders"])]),b(V)],64))}},ue=O(re,[["__scopeId","data-v-31d4e1f3"]]);export{ue as default};
